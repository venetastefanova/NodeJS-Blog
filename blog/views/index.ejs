<!-- views/pages/index.ejs -->

<!DOCTYPE html>
<html lang="en">
<head>
    <% include partials/head %>
    
</head>
<body class="container-fluid">

<header>
    <% include partials/header %>
    <% include partials/titleheader %>
</header>

<div class="row container">
    <div class="col-sm-8">
        <div class="row">
                <% include partials/posts %>    
                <!-- <a href="javascript:prevPage()" id="btn_prev">Viimeinen</a>
                
                <span id="page">1</span>
                <a href="javascript:nextPage()" id="btn_next">Seuraava Â»</a>   -->
        </div>  
        <div> <!-- Pagination -->
                <% if (pages > 0) { %>
                    <ul class="pagination text-center">
                        <% if (current == 1) { %>
                            <li class="disabled"><a>First</a></li>
                        <% } else { %>
                            <li><a href="/blog-posts/1">First</a></li>
                        <% } %>
                        <% var i = (Number(current) > 5 ? Number(current) - 4 : 1) %>
                        <% if (i !== 1) { %>
                            <li class="disabled"><a>...</a></li>
                        <% } %>
                        <% for (; i <= (Number(current) + 4) && i <= pages; i++) { %>
                            <% if (i == current) { %>
                                <li class="active"><a><%= i %></a></li>
                            <% } else { %>
                                <li><a href="/blog-posts/<%= i %>"><%= i %></a></li>
                            <% } %>
                            <% if (i == Number(current) + 4 && i < pages) { %>
                                <li class="disabled"><a>...</a></li>
                            <% } %>
                        <% } %>
                        <% if (current == pages) { %>
                            <li class="disabled"><a>Last</a></li>
                        <% } else { %>
                            <li><a href="/blog-posts/<%= pages %>">Last</a></li>
                        <% } %>
                    </ul>
                <% } %>
            </div>              
    </div>
    <div class="col-sm-4">
        <div class="row">
            <% include partials/newsletter %>
        </div>
        
        <div class="row">
            <% include partials/authors %>
        </div>
        <div class="row">
        </div>
    </div>
</div>

      
</body>

<footer class="container-fluid footer">
        <% include partials/footer %>
    </footer>

    <script
    src="https://code.jquery.com/jquery-3.2.1.min.js"
    integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
    crossorigin="anonymous"></script>
<!-- <script>

var posts =[];
$(".pag").each(function(){
    posts.push($(this));
});

console.log(posts);

var current_page = 1;
var posts_per_page = 3;


function prevPage()
{
    if (current_page > 1) {
        current_page--;
        changePage(current_page);
    }
}

function nextPage()
{
    if (current_page < numPages()) {
        current_page++;
        changePage(current_page);
    }
}
function changePage(page)
{

var next = document.getElementById("btn_next");
var previous = document.getElementById("btn_prev");
var blogPosts = document.getElementById("listingTable");
var page_span = document.getElementById("page");

// Validate page
if (page < 1) page = 1;
if (page > numPages()) page = numPages();

//$("#listingTable").fadeOut("slow", function(){

blogPosts.innerHTML = "";

for (var i = (page-1) * posts_per_page; i < (page * posts_per_page) && i < posts.length; i++)
{
blogPosts.innerHTML += posts[i][0].innerHTML ;


}
//$("#listingTable").fadeIn();

//});
// buttonCheck();
page_span.innerHTML = page;

if (page == 1) {
previous.style.visibility = "hidden";
} else {
previous.style.visibility = "visible";
}

if (page == numPages()) {
next.style.visibility = "hidden";
previous.style.visibility = "visible";

} else {
next.style.visibility = "visible";
}
}

function numPages()
{
return Math.ceil(posts.length / posts_per_page);
}


window.onload = function() {
changePage(1);
};

</script> -->
    </html>
